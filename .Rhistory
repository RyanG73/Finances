outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date == date('2025-07-01')) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
#dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
library(tidyverse)
library(dplyr)
setwd("/Users/ryangerda/Development/Finances")
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
today <- as.Date('2025-07-31')#lubridate::today()
first_day_this_month <- lubridate::floor_date(today,unit='month')
last_day_this_month <- lubridate::ceiling_date(today,unit='month') - 1
first_day_this_year <- lubridate::floor_date(today,unit='year')
last_day_this_year <- lubridate::ceiling_date(today,unit='year') - 1
last_day_last_month <- first_day_this_month - 1
first_day_last_month <- lubridate::floor_date(last_day_last_month,unit='month')
first_day_next_month <- last_day_this_month + 1
last_day_next_month <-  lubridate::ceiling_date(first_day_next_month,unit='month') - 1
missing_bills <- 0
# Joint Income
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint') %>%
group_by(lubridate::year(date), lubridate::month(date),name) %>%
reframe(amount = sum(amount,na.rm=T))
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
#dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
outcome
View(outcome)
summary(outcome)
sum(outcome)
colSums(outcome)
sapply(df[, sapply(outcome, is.numeric)], sum)
sapply(outcome[, sapply(outcome, is.numeric)], sum)
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
sapply(income[, sapply(income, is.numeric)], sum, na.rm=T)
income
raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint')
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint')
View(income)
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
outcome
mean(income$amount,na.rm=T)
# Joint Income
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint') %>%
group_by(lubridate::year(date), lubridate::month(date),name) %>%
reframe(amount = sum(amount,na.rm=T))
mean(income$amount,na.rm=T)
12406.22*12/.63
282.13+1324.32+200.14+161.43+77.81+550.22+179.66+3898.87+125.04+303.71+21.59+89.63+278.59+104.99
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
#dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
#dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
9300*12
111600/.62
700*12
649*24
library(tidyverse)
library(dplyr)
setwd("/Users/ryangerda/Development/Finances")
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
today <- as.Date('2025-07-31')#lubridate::today()
first_day_this_month <- lubridate::floor_date(today,unit='month')
last_day_this_month <- lubridate::ceiling_date(today,unit='month') - 1
first_day_this_year <- lubridate::floor_date(today,unit='year')
last_day_this_year <- lubridate::ceiling_date(today,unit='year') - 1
last_day_last_month <- first_day_this_month - 1
first_day_last_month <- lubridate::floor_date(last_day_last_month,unit='month')
first_day_next_month <- last_day_this_month + 1
last_day_next_month <-  lubridate::ceiling_date(first_day_next_month,unit='month') - 1
missing_bills <- 0
# Joint Income
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint') %>%
group_by(lubridate::year(date), lubridate::month(date),name) %>%
reframe(amount = sum(amount,na.rm=T))
mean(income$amount,na.rm=T)
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
#dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
outcome
View(outcome)
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
library(tidyverse)
library(dplyr)
setwd("/Users/ryangerda/Development/Finances")
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
today <- as.Date('2025-07-31')#lubridate::today()
first_day_this_month <- lubridate::floor_date(today,unit='month')
last_day_this_month <- lubridate::ceiling_date(today,unit='month') - 1
first_day_this_year <- lubridate::floor_date(today,unit='year')
last_day_this_year <- lubridate::ceiling_date(today,unit='year') - 1
last_day_last_month <- first_day_this_month - 1
first_day_last_month <- lubridate::floor_date(last_day_last_month,unit='month')
first_day_next_month <- last_day_this_month + 1
last_day_next_month <-  lubridate::ceiling_date(first_day_next_month,unit='month') - 1
missing_bills <- 0
# Joint Income
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint') %>%
group_by(lubridate::year(date), lubridate::month(date),name) %>%
reframe(amount = sum(amount,na.rm=T))
mean(income$amount,na.rm=T)
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
# ryan Spending
ryan_spend <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
View(ryan_spend)
sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm=T)
as_tibble(sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm=T))
summary_df <- as.data.frame(t(sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm = TRUE)))
print(summary_df)
sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm = TRUE)
t(sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm = TRUE))
# Get the numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to a one-row data frame with column names as headers
summary_df <- as.data.frame(matrix(numeric_sums, nrow = 1))
# Set the column names
colnames(summary_df) <- names(numeric_sums)
print(summary_df)
sapply(ryan_spend[, sapply(ryan_spend, is.numeric)], sum, na.rm = TRUE)
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
)
print(summary_df)
# ryan Spending
ryan_spend <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
# Get numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
)
print(summary_df)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
) |>
arrange(date)
print(summary_df)
ryan_spend
# Get numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
numeric_sums
ryan_spend <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date)
ryan_spend
ryan_spend |> filter(date == 'Fun') |> mean()
ryan_spend |> filter(date == 'Fun')
ryan_spend |> filter(type == 'Fun')
ryan_spend |> filter(type == 'Fun') |> group_by(date) |> reframe(monthly = mean(amount,na.rm=T))
ryan_spend |> filter(type == 'Fun') |> group_by(,.) |> reframe(monthly = mean(amount,na.rm=T))
ryan_spend |> filter(type == 'Fun') |> group_by(.) |> reframe(monthly = mean(amount,na.rm=T))
ryan_spend |> filter(type == 'Fun') |> reframe(monthly = mean(amount,na.rm=T))
# ryan Spending
ryan_spend <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
# Get numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
) |>
arrange(date)
print(summary_df)
View(summary_df)
library(tidyverse)
setwd("/Users/ryangerda/Development/Finances")
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
today <- as.Date('2025-07-31')#lubridate::today()
first_day_this_month <- lubridate::floor_date(today,unit='month')
last_day_this_month <- lubridate::ceiling_date(today,unit='month') - 1
first_day_this_year <- lubridate::floor_date(today,unit='year')
last_day_this_year <- lubridate::ceiling_date(today,unit='year') - 1
last_day_last_month <- first_day_this_month - 1
first_day_last_month <- lubridate::floor_date(last_day_last_month,unit='month')
first_day_next_month <- last_day_this_month + 1
last_day_next_month <-  lubridate::ceiling_date(first_day_next_month,unit='month') - 1
missing_bills <- 0
beginning <- log %>% filter(month == first_day_this_month)
month_out_raw <- raw %>%
filter(in_out == 'Out') %>%
filter(date >= first_day_this_month & date <= last_day_this_month) %>%
group_by(name,primary_category,secondary_category,type,in_out) %>%
reframe(amount_out = sum(amount,na.rm=T))
month_out_agg <- month_out_raw %>%
group_by(name,primary_category,secondary_category) %>%
reframe(amount_out = sum(amount_out,na.rm=T))
month_in_raw <- raw %>%
filter(in_out == 'In') %>%
filter(date >= first_day_this_month & date <= last_day_this_month) %>%
group_by(name,primary_category,secondary_category,type,in_out) %>%
reframe(amount_in = sum(amount,na.rm=T))
month_in_agg <- month_in_raw %>%
group_by(name,primary_category,secondary_category) %>%
reframe(amount_in = sum(amount_in,na.rm=T))
########
end_auto <- beginning %>%
left_join(month_out_agg,by=c('name'='name',
'primary_category'='primary_category',
'secondary_category'='secondary_category')) %>%
left_join(month_in_agg,by=c('name'='name',
'primary_category'='primary_category',
'secondary_category'='secondary_category')) %>%
mutate(amount_out = amount_out * -1) %>%
mutate(month_end = select(., amount:amount_in) %>% rowSums(na.rm = TRUE))
square_auto <- end_auto %>%
filter(primary_category %in% c('Checking','Savings')) %>%
group_by(name,primary_category) %>%
reframe(total = sum(month_end,na.rm=T)) %>%
mutate(end_goal = ifelse(name == 'Joint' & primary_category == 'Checking', 5000,NA)) %>%
mutate(difference = total - end_goal)
square_auto
end_auto
setwd("/Users/ryangerda/Development/Finances")
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
today <- as.Date('2025-08-31')#lubridate::today()
first_day_this_month <- lubridate::floor_date(today,unit='month')
last_day_this_month <- lubridate::ceiling_date(today,unit='month') - 1
first_day_this_year <- lubridate::floor_date(today,unit='year')
last_day_this_year <- lubridate::ceiling_date(today,unit='year') - 1
last_day_last_month <- first_day_this_month - 1
first_day_last_month <- lubridate::floor_date(last_day_last_month,unit='month')
first_day_next_month <- last_day_this_month + 1
last_day_next_month <-  lubridate::ceiling_date(first_day_next_month,unit='month') - 1
missing_bills <- 0
# Joint Income
income <- raw %>%
dplyr::filter(in_out == 'In') %>%
dplyr::filter(name == 'Joint') %>%
group_by(lubridate::year(date), lubridate::month(date),name) %>%
reframe(amount = sum(amount,na.rm=T))
mean(income$amount,na.rm=T)
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
# ryan Spending
ryan_spend <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
ryan_spend
View(ryan_spend)
raw %>%
filter(date > (today - 100))
d
# ryan Spending
ryan_spend <- raw %>%
filter(date > (today - 100)) |>
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
View(raw)
last_day_this_month
raw %>%
filter(last_day_this_month %m-% months(3))
last_day_this_month %m-% months(3)
three_months_ago <- last_day_this_month %m-% months(3)
# ryan Spending
ryan_spend <- raw %>%
filter(date > three_months_ago) |>
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
raw <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'raw spending') %>%
janitor::clean_names()
log <- readxl::read_excel("Data/Joint Spending Plan 2025.xlsx",sheet = 'month log') %>%
janitor::clean_names()
# joint Spending
outcome <- raw %>%
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Joint') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
dplyr::filter(date >= today-93) %>%
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
outcome
three_months_ago <- last_day_this_month %m-% months(3)
# ryan Spending
ryan_spend <- raw %>%
filter(date > three_months_ago) |>
dplyr::filter(in_out == 'Out') %>%
dplyr::filter(name == 'Ryan') %>%
dplyr::filter(primary_category == 'Checking') %>%
mutate(Year = lubridate::year(date),
Month = lubridate::month(date,label = TRUE),
date = lubridate::floor_date(date,unit='month')) |>
group_by(date,type) %>%
reframe(amount = sum(amount,na.rm=T)) %>%
arrange(type,date) |>
pivot_wider(names_from = 'date',values_from = 'amount')
# Get numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
) |>
arrange(date)
print(summary_df)
sapply(outcome[, sapply(outcome, is.numeric)], sum, na.rm=T)
ryan_spend
# Get numeric column sums
numeric_sums <- sapply(ryan_spend[, sapply(ryan_spend, is.numeric), drop = FALSE], sum, na.rm = TRUE)
# Convert to long-format data frame with 'date' as the name column
summary_df <- data.frame(
date = names(numeric_sums),
total = as.numeric(numeric_sums),
row.names = NULL
) |>
arrange(date)
print(summary_df)
